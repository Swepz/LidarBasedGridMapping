<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LidarBasedGridMapping: src.occupancy.OccupancyGrid Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LidarBasedGridMapping
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesrc.html">src</a></li><li class="navelem"><a class="el" href="namespacesrc_1_1occupancy.html">occupancy</a></li><li class="navelem"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html">OccupancyGrid</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classsrc_1_1occupancy_1_1_occupancy_grid-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">src.occupancy.OccupancyGrid Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aba3f7b8b4f837b0839905a5dc90a3d0b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#aba3f7b8b4f837b0839905a5dc90a3d0b">__init__</a> (self, map_size, <a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a3b1ed2b6b4b06ba2553913a06688f323">config</a>)</td></tr>
<tr class="separator:aba3f7b8b4f837b0839905a5dc90a3d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41ec48b23aae1f41b43f72abb7198ec6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a41ec48b23aae1f41b43f72abb7198ec6">fetch_prob_map</a> (self)</td></tr>
<tr class="separator:a41ec48b23aae1f41b43f72abb7198ec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeffbb52c3ff8a3cac350cfba9c801e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#aeeffbb52c3ff8a3cac350cfba9c801e6">add_prob</a> (self, occupied)</td></tr>
<tr class="separator:aeeffbb52c3ff8a3cac350cfba9c801e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9339bcb5bc114a8cf780e13dcbcd70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#adf9339bcb5bc114a8cf780e13dcbcd70">bresenham_line</a> (self, x0, y0, x1, y1)</td></tr>
<tr class="separator:adf9339bcb5bc114a8cf780e13dcbcd70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd4dac92cd00f04db452bebfdbe1ccb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a8cd4dac92cd00f04db452bebfdbe1ccb">laser_sweep</a> (self, xi, zi)</td></tr>
<tr class="separator:a8cd4dac92cd00f04db452bebfdbe1ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7f659d8124e6650d70ff68e10804ae7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#ad7f659d8124e6650d70ff68e10804ae7">check_cells</a> (self, xi, zi)</td></tr>
<tr class="separator:ad7f659d8124e6650d70ff68e10804ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c7d243d0975df5cfaabe9ccfd2e8125"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a7c7d243d0975df5cfaabe9ccfd2e8125">update</a> (self, xi, zi)</td></tr>
<tr class="separator:a7c7d243d0975df5cfaabe9ccfd2e8125"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3b1ed2b6b4b06ba2553913a06688f323"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a3b1ed2b6b4b06ba2553913a06688f323">config</a></td></tr>
<tr class="separator:a3b1ed2b6b4b06ba2553913a06688f323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a164a81a053eb09497089222112c80b00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a164a81a053eb09497089222112c80b00">resolution</a></td></tr>
<tr class="separator:a164a81a053eb09497089222112c80b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63193c2abaf50e297df2300607294a99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a63193c2abaf50e297df2300607294a99">probability</a></td></tr>
<tr class="separator:a63193c2abaf50e297df2300607294a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607967c9af5f45636fbdf997cd5deb07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsrc_1_1occupancy_1_1_occupancy_grid.html#a607967c9af5f45636fbdf997cd5deb07">log_prob_map</a></td></tr>
<tr class="separator:a607967c9af5f45636fbdf997cd5deb07"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Represents an occupancy grid for robotic mapping.</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aba3f7b8b4f837b0839905a5dc90a3d0b" name="aba3f7b8b4f837b0839905a5dc90a3d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba3f7b8b4f837b0839905a5dc90a3d0b">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>map_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initializes the occupancy grid.
:param config: The configuration dictionary.
:param map_size: The size of the map.
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aeeffbb52c3ff8a3cac350cfba9c801e6" name="aeeffbb52c3ff8a3cac350cfba9c801e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeffbb52c3ff8a3cac350cfba9c801e6">&#9670;&#160;</a></span>add_prob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.add_prob </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>occupied</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the log odds for a cell being occupied or free.

:param occupied: A boolean indicating if the cell is occupied (True) or free (False).
:return: Log odds of the cell being occupied or free.
</pre> 
</div>
</div>
<a id="adf9339bcb5bc114a8cf780e13dcbcd70" name="adf9339bcb5bc114a8cf780e13dcbcd70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9339bcb5bc114a8cf780e13dcbcd70">&#9670;&#160;</a></span>bresenham_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.bresenham_line </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the grid cells between two points in the occupancy grid map using the Bresenham's line algorithm.

:param x0, y0: The coordinates of the first point.
:param x1, y1: The coordinates of the second point.

:return: A 2D array where each row represents the (x, y) coordinates of a cell in the occupancy 
        grid that lies on the line between the start and end point.
</pre> 
</div>
</div>
<a id="ad7f659d8124e6650d70ff68e10804ae7" name="ad7f659d8124e6650d70ff68e10804ae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7f659d8124e6650d70ff68e10804ae7">&#9670;&#160;</a></span>check_cells()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.check_cells </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>xi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Checks which cells are occupied or free based on the laser sweep and current robot position.

This function takes the current pose of the robot and the laser readings as input. It computes 
a "laser sweep", which is the set of cells that the robot's laser scanner would intersect 
given its current position and the range data. The cells that the laser hits are considered 
occupied. All cells between the robot's current position and these hit cells are considered free, 
since the laser would have to pass through these cells to reach the hit cells.

Both sets of cells (occupied and free) are rounded to the nearest integer to fit on a discrete 
grid, which is then multiplied by the map resolution to convert to the map's scale. 

:param xi: The current pose of the robot [x, y, theta].
:param zi: The laser readings.

:return: A tuple containing two lists. The first list is the set of grid cells that the laser 
        readings indicate are occupied. The second list is the set of grid cells that are 
        between the robot's current position and the occupied cells, i.e., the cells that the 
        laser must have passed through to reach the occupied cells, thus indicating they are free.
</pre> 
</div>
</div>
<a id="a41ec48b23aae1f41b43f72abb7198ec6" name="a41ec48b23aae1f41b43f72abb7198ec6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41ec48b23aae1f41b43f72abb7198ec6">&#9670;&#160;</a></span>fetch_prob_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.fetch_prob_map </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts the map from log odds representation to probabilities and returns it.

This function applies the inverse of the log odds function to the map's log odds representation. 
This transforms the map back into probabilities of cells being occupied. Each cell's value 
represents the probability that the cell is occupied, ranging from 0 (certainly not occupied) to 
1 (certainly occupied).

The conversion is done using the logistic function, which is the inverse of the logit function 
used to calculate log odds. The logistic function is defined as:

    f(x) = 1 / (1 + e^-x)

where `x` is the log odds value. This function takes a real-valued input (the log odds) and 
outputs a value between 0 and 1 (the probability).

:return: A 2D numpy array where each cell's value is the probability that the cell is occupied.
</pre> 
</div>
</div>
<a id="a8cd4dac92cd00f04db452bebfdbe1ccb" name="a8cd4dac92cd00f04db452bebfdbe1ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cd4dac92cd00f04db452bebfdbe1ccb">&#9670;&#160;</a></span>laser_sweep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.laser_sweep </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>xi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Performs a laser sweep around the current robot pose.

This function converts each laser reading from polar coordinates (distance, angle) 
relative to the robot's current position and orientation, to global Cartesian coordinates (x, y). 

The output is a 2D array where each column represents a point (x, y) in the global frame 
where a laser beam has hit an obstacle.

:param xi: The current pose of the robot, represented as a 1D array [x, y, theta].
            x, y are the coordinates in the global frame and theta is the orientation of the robot.

:param zi: The laser readings, represented as a 1D array. Each element of the array represents 
            the distance from the robot to an obstacle at a specific angle. The angles are assumed 
            to be evenly distributed in the range (-pi/2, pi/2).

:return: A 2D array where each column is a point (x, y) in the global frame where a laser beam hit an obstacle.
</pre> 
</div>
</div>
<a id="a7c7d243d0975df5cfaabe9ccfd2e8125" name="a7c7d243d0975df5cfaabe9ccfd2e8125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c7d243d0975df5cfaabe9ccfd2e8125">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.update </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>xi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Updates the occupancy grid based on the current robot pose and laser readings.

This function uses the inverse sensor model to compute the log odds that each cell in the map is 
occupied. The inverse sensor model takes the current robot pose and the laser readings as input 
and outputs the log odds that each cell is occupied. 

The function then updates the log odds for each cell in the occupancy grid by adding the log odds 
computed by the inverse sensor model to the cell's current log odds. This effectively performs a 
Bayesian update of the cell's occupancy probability, since log odds are additive in the same way 
that probabilities are multiplicative.

:param xi: The current pose of the robot [x, y, theta].
:param zi: The laser readings.
</pre> 
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3b1ed2b6b4b06ba2553913a06688f323" name="a3b1ed2b6b4b06ba2553913a06688f323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1ed2b6b4b06ba2553913a06688f323">&#9670;&#160;</a></span>config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.config</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a607967c9af5f45636fbdf997cd5deb07" name="a607967c9af5f45636fbdf997cd5deb07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a607967c9af5f45636fbdf997cd5deb07">&#9670;&#160;</a></span>log_prob_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.log_prob_map</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a63193c2abaf50e297df2300607294a99" name="a63193c2abaf50e297df2300607294a99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63193c2abaf50e297df2300607294a99">&#9670;&#160;</a></span>probability</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.probability</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a164a81a053eb09497089222112c80b00" name="a164a81a053eb09497089222112c80b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a164a81a053eb09497089222112c80b00">&#9670;&#160;</a></span>resolution</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.occupancy.OccupancyGrid.resolution</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="occupancy_8py.html">occupancy.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
